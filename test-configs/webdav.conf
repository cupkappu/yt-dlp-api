# Apache HTTP Server Configuration for WebDAV Testing

ServerRoot "/usr/local/apache2"
Listen 80

# Modules
LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule dav_module modules/mod_dav.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule mime_module modules/mod_mime.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule dir_module modules/mod_dir.so
LoadModule alias_module modules/mod_alias.so

# Basic settings
ServerName localhost
DirectoryIndex index.html
ErrorLog logs/error.log
LogLevel warn

# MIME types
TypesConfig conf/mime.types

<Directory />
    AllowOverride none
    Require all denied
</Directory>

# WebDAV configuration
DocumentRoot "/usr/local/apache2/htdocs"
<Directory "/usr/local/apache2/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride None
    
    # Enable WebDAV
    Dav On
    
    # Authentication
    AuthType Basic
    AuthName "WebDAV Test Server"
    AuthUserFile /usr/local/apache2/conf/.htpasswd
    
    # Allow access for authenticated users
    <RequireAll>
        Require valid-user
    </RequireAll>
    
    # WebDAV permissions
    <LimitExcept GET POST OPTIONS>
        Require valid-user
    </LimitExcept>
</Directory>

# Create .htpasswd with testuser:testpass
# Generated with: htpasswd -b .htpasswd testuser testpass